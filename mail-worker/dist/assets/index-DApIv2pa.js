import{aj as J,z as d,D,k as R,F as z,c as F,o as k,ab as l,p as c,m as C,f,a7 as G,t as $,g as r,h as K,an as Q,ai as W}from"./index-BtzXKQwE.js";import{E as X}from"./el-dialog-CXB77qUH.js";/* empty css                       *//* empty css                  */import{E as Z}from"./el-date-picker-B44CRU4K.js";/* empty css                 */import"./el-scrollbar-CKPMF6AL.js";import"./el-tag-Crsyy918.js";import{E as x,a as ee}from"./el-select--GMHwZW2.js";import{s as le,a as ae}from"./star-ByoiMwfY.js";import{e as te}from"./index-BLu_tqrS.js";import{u as oe}from"./email-CLpV48-R.js";import{a as se,b as ne,c as re}from"./all-email-C8kDu5NT.js";import{I as y}from"./iconify-py6I6n_h.js";import{a as B}from"./day-PdIoF79x.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as ue}from"./vnode-D7e7dmSq.js";import{E as me}from"./index-_2NpElih.js";import{E as ce}from"./index-CTUonbyI.js";import"./event-BB_Ol6Sd.js";import"./index-CBgbCWze.js";import"./dayjs.min--KgWQ631.js";import"./index-DeJUs09x.js";import"./index-DauRvaKi.js";import"./index-Cu3SrEOD.js";import"./time-utils-B0dkmGNr.js";import"./position-VaOS-z7A.js";import"./throttle-SLW7VV_y.js";import"./el-empty-B50ZRwXV.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-checkbox-DMbFvupR.js";import"./index-EFTyCj7O.js";const de={class:"email-list-box"},pe={class:"search-type"},fe={class:"clear-email"},ye={class:"clear-button"},he=Object.assign({name:"all-email"},{__name:"index",setup(be){const{t:n}=J(),h=oe(),u=d(""),v=d({}),m=d(""),T=d(),b=d(!1),E=d(!1),_=()=>{T.value.toggleMenu()},e=D({timeSort:0,type:"receive",userEmail:null,accountEmail:null,name:null,subject:null,searchType:"name"}),a=D({subject:"",sendEmail:"",sendName:"",startTime:"",toEmail:"",endTime:"",type:"eq"});function S(){a.subject="",a.sendEmail="",a.sendName="",a.startTime="",a.toEmail="",a.endTime=""}function U(){S(),a.type="eq",a.endTime="",u.value=null}const N=R(()=>{if(e.searchType==="user")return n("user");if(e.searchType==="account")return n("selectEmail");if(e.searchType==="name")return n("sender");if(e.searchType==="subject")return n("subject")}),w=localStorage.getItem("all-email-params");if(w){const t=JSON.parse(w);e.type=t.type,e.timeSort=t.timeSort,e.status=t.status,e.searchType=t.searchType}z(()=>e,()=>{localStorage.setItem("all-email-params",JSON.stringify(e))},{deep:!0});function M(){b.value=!0}function Y(){if(u.value&&(a.startTime=B(u.value[0]).format("YYYY-MM-DD HH:mm:ss"),a.endTime=B(u.value[1]).add(1,"day").format("YYYY-MM-DD HH:mm:ss")),!a.sendEmail&&!a.sendName&&!a.subject&&!a.toEmail&&!u.value){b.value=!1;return}ce.confirm(n("delAllEmailConfirm"),{confirmButtonText:n("confirm"),cancelButtonText:n("cancel"),type:"warning"}).then(()=>{E.value=!0,ne(a).then(()=>{Q({message:n("clearSuccess"),type:"success",plain:!0}),S(),v.value.refreshList()}).finally(()=>{E.value=!1})})}function I(){m.value=null,e.timeSort=0,e.type="receive",e.userEmail=null,e.accountEmail=null,e.name=null,e.subject=null,e.searchType="name"}function g(){e.userEmail=null,e.accountEmail=null,e.name=null,e.subject=null,e.searchType==="user"&&(e.userEmail=m.value),e.searchType==="account"&&(e.accountEmail=m.value),e.searchType==="name"&&(e.name=m.value),e.searchType==="subject"&&(e.subject=m.value),v.value.refreshList()}function j(){e.timeSort=e.timeSort?0:1,g()}function L(){g()}function q(t){h.contentData.email=t,h.contentData.delType="physics",h.contentData.showStar=!1,h.contentData.showReply=!1,W.push({name:"content"})}function H(t,o){return re({emailId:t,size:o,...e})}return(t,o)=>{const i=ee,V=x,p=ue,O=Z,P=me,A=X;return k(),F("div",de,[l(te,{ref_key:"sysEmailScroll",ref:v,"get-emailList":H,"email-delete":r(se),"star-add":r(ae),"star-cancel":r(le),"show-star":!1,"show-user-info":"","show-status":"",actionLeft:"4px","show-account-icon":!1,onJump:q,onRefreshBefore:I,type:"all-email"},{first:c(()=>[l(p,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=s=>m.value=s),placeholder:t.$t("searchByContent"),class:"search-input"},{prefix:c(()=>[f("div",{onClick:G(_,["stop"])},[l(V,{ref_key:"mySelect",ref:T,modelValue:e.searchType,"onUpdate:modelValue":o[0]||(o[0]=s=>e.searchType=s),placeholder:t.$t("select"),class:"select"},{default:c(()=>[l(i,{key:"3",label:t.$t("sender"),value:"name"},null,8,["label"]),l(i,{key:"4",label:t.$t("subject"),value:"subject"},null,8,["label"]),l(i,{key:"1",label:t.$t("user"),value:"user"},null,8,["label"]),l(i,{key:"2",label:t.$t("selectEmail"),value:"account"},null,8,["label"])]),_:1},8,["modelValue","placeholder"]),f("div",pe,[f("span",null,$(N.value),1),l(r(y),{class:"setting-icon",icon:"mingcute:down-small-fill",width:"20",height:"20"})])])]),_:1},8,["modelValue","placeholder"]),l(V,{modelValue:e.type,"onUpdate:modelValue":o[2]||(o[2]=s=>e.type=s),placeholder:"Select",class:"status-select",onChange:L},{default:c(()=>[l(i,{key:"1",label:t.$t("all"),value:"all"},null,8,["label"]),l(i,{key:"3",label:t.$t("received"),value:"receive"},null,8,["label"]),l(i,{key:"2",label:t.$t("sent"),value:"send"},null,8,["label"]),l(i,{key:"4",label:t.$t("selectDeleted"),value:"delete"},null,8,["label"]),l(i,{key:"4",label:t.$t("noRecipientTitle"),value:"noone"},null,8,["label"])]),_:1},8,["modelValue"]),l(r(y),{class:"icon",icon:"iconoir:search",onClick:g,width:"20",height:"20"}),e.timeSort===0?(k(),C(r(y),{key:0,class:"icon",onClick:j,icon:"material-symbols-light:timer-arrow-down-outline",width:"28",height:"28"})):(k(),C(r(y),{key:1,class:"icon",onClick:j,icon:"material-symbols-light:timer-arrow-up-outline",width:"28",height:"28"})),l(r(y),{class:"icon clear",icon:"fluent:broom-sparkle-16-regular",width:"22",height:"22",onClick:M})]),_:1},8,["email-delete","star-add","star-cancel"]),l(A,{modelValue:b.value,"onUpdate:modelValue":o[9]||(o[9]=s=>b.value=s),title:t.$t("clearEmail"),width:"335",onClosed:U},{default:c(()=>[f("div",fe,[l(p,{modelValue:a.sendName,"onUpdate:modelValue":o[3]||(o[3]=s=>a.sendName=s),placeholder:t.$t("sender")},null,8,["modelValue","placeholder"]),l(p,{modelValue:a.subject,"onUpdate:modelValue":o[4]||(o[4]=s=>a.subject=s),placeholder:t.$t("subject")},null,8,["modelValue","placeholder"]),l(p,{modelValue:a.sendEmail,"onUpdate:modelValue":o[5]||(o[5]=s=>a.sendEmail=s),placeholder:t.$t("sendEmailAddress")},null,8,["modelValue","placeholder"]),l(p,{modelValue:a.toEmail,"onUpdate:modelValue":o[6]||(o[6]=s=>a.toEmail=s),placeholder:t.$t("toEmail")},null,8,["modelValue","placeholder"]),l(O,{"popper-class":"my-date-picker",modelValue:u.value,"onUpdate:modelValue":o[7]||(o[7]=s=>u.value=s),type:"daterange",teleported:!1,"unlink-panels":"","range-separator":r(n)("to"),size:"default"},null,8,["modelValue","range-separator"]),f("div",ye,[l(V,{modelValue:a.type,"onUpdate:modelValue":o[8]||(o[8]=s=>a.type=s),style:{width:"200px"}},{default:c(()=>[l(i,{key:"eq",label:r(n)("equal"),value:"eq"},null,8,["label"]),l(i,{key:"left",label:r(n)("leading"),value:"left"},null,8,["label"]),l(i,{key:"include",label:r(n)("include"),value:"include"},null,8,["label"])]),_:1},8,["modelValue"]),l(P,{loading:E.value,type:"primary",onClick:Y},{default:c(()=>[K($(r(n)("clear")),1)]),_:1},8,["loading"])])])]),_:1},8,["modelValue","title"])])}}}),We=ie(he,[["__scopeId","data-v-4af3d3f6"]]);export{We as default};
